"use strict";angular.module("prevuApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/auteur",{templateUrl:"views/auteur.html",controller:"AuteurCtrl"}).when("/auteur/:search",{templateUrl:"views/auteur.html",controller:"AuteurCtrl"}).when("/livre",{templateUrl:"views/issues.html",controller:"IssuesCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("prevuApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("prevuApp").controller("AuteurCtrl",["$scope","$routeParams","Books","prevuAPIservice",function(a,b,c,d){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],console.log(b.search);var e=function(){d.searchAuthor(a.queryTerm).success(function(b){var c=new Miso.Dataset({data:b.search});c.fetch({success:function(){a.stats={docs:this.length,issues:this.sum("issues"),issuesMax:this.max("issues"),issuesMin:this.min("issues"),renewals:this.sum("renewals"),male:this.sum("Male"),female:this.sum("Female"),years:this.mean("publicationyear").toFixed(2)}}})})};a.search=function(){if(a.queryTerm.length>4){var b=new c;b.$get({auteurName:a.queryTerm}),a.books=b,e()}}}]),angular.module("prevuApp").factory("Books",["$resource",function(a){return a("http://localhost:8888/angular/prevu/api/search/:auteurName",{auteurName:"@auteurName"},{loan:{method:"PUT",params:{bookId:"@bookId"},isArray:!1}})}]),angular.module("prevuApp").directive("stupidTable",function(){return{restrict:"A",link:function(a,b){b.stupidtable(),b.on("aftertablesort",function(a,b){var c=$(this).find("th");c.find(".arrow").remove();var d=$.fn.stupidtable.dir,e=b.direction===d.ASC?"&uarr;":"&darr;";c.eq(b.column).append('<span class="arrow">'+e+"</span>")})}}}),angular.module("prevuApp").factory("prevuAPIservice",["$http",function(a){var b={};return b.searchAuthor=function(b){return a({url:"http://localhost:8888/prevu/application/api/search/"+b})},b.searchIssuesByTitle=function(b){return a({url:"http://localhost:8888/prevu/application/api/issues/title/"+b})},b}]),angular.module("prevuApp").controller("IssuesCtrl",["$scope","$routeParams","prevuAPIservice",function(a,b,c){a.search=function(){a.queryTerm.length>4&&(console.log(a.queryTerm),c.searchIssuesByTitle(a.queryTerm).success(function(b){console.log(b.issues),a.issues=b.issues}))}}]);